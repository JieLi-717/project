{"remainingRequest":"G:\\DaiMa\\project\\node_modules\\babel-loader\\lib\\index.js!G:\\DaiMa\\project\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!G:\\DaiMa\\project\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\DaiMa\\project\\src\\App.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\DaiMa\\project\\src\\App.vue","mtime":1755234844922},{"path":"G:\\DaiMa\\project\\.babelrc","mtime":1648796909196},{"path":"G:\\DaiMa\\project\\babel.config.js","mtime":1648795891557},{"path":"G:\\DaiMa\\project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1755234282791},{"path":"G:\\DaiMa\\project\\node_modules\\babel-loader\\lib\\index.js","mtime":1755234509331},{"path":"G:\\DaiMa\\project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1755234282791},{"path":"G:\\DaiMa\\project\\node_modules\\vue-loader\\lib\\index.js","mtime":1755234280491}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Vue from 'vue';\nimport HelloWorld from \"./components/HelloWorld.vue\";\nimport postPage from \"./components/postPage.vue\";\nexport default {\n  name: 'app',\n  components: {\n    HelloWorld: HelloWorld,\n    postPage: postPage\n  },\n  data: function data() {\n    return {\n      updateTime: {\n        year: '',\n        month: '',\n        date: ''\n      },\n      //年月日\n      changePage: false,\n      //切换页面\n      show: false,\n      //输入名字框\n      provinceName: '四川',\n      total: 125879,\n      //承诺次数\n      getPost: false,\n      //触发生成海报\n      sound: require(\"./assets/unplay.png\"),\n      isplay: false,\n      Mp: \"./assets/audio/music.mp3\",\n      canvasWidth: null,\n      canvasHeight: null,\n      canvasImg: '',\n      // 签名图片地址\n      ctx: null,\n      //画板\n      stage_info: [],\n      // 移动端按下点到屏幕的偏差\n      isDown: false,\n      //是否按下\n      points: [],\n      //按下点组合\n      startX: 0,\n      // 起始点x坐标\n      startY: 0 // 起始点y坐标\n\n    };\n  },\n  created: function created() {},\n  mounted: function mounted() {\n    this.addDate(); // this.init()\n  },\n  watch: {\n    name: function name(newV, oldV) {\n      this.name = newV;\n    }\n  },\n  methods: {\n    //播放背景音乐\n    changeImg: function changeImg() {\n      var vo = document.getElementById(\"video\");\n      this.isplay = !this.isplay;\n\n      if (this.isplay) {\n        this.sound = require(\"./assets/play.png\");\n        vo.play();\n      } else {\n        this.sound = require(\"./assets/unplay.png\");\n        vo.pause();\n      }\n    },\n    //获取点击承诺事件\n    change: function change(e) {\n      var _this = this;\n\n      this.changePage = e;\n      setTimeout(function () {\n        _this.show = true;\n\n        _this.init();\n      }, 5000);\n    },\n    //获取选中后地址\n    province: function province(e) {\n      this.provinceName = e; // console.log(this.provinceName)\n    },\n    //获取当前年月日\n    addDate: function addDate() {\n      var nowDate = new Date();\n      var date = {\n        year: nowDate.getFullYear(),\n        month: nowDate.getMonth() + 1,\n        date: nowDate.getDate()\n      };\n      var newmonth = date.month > 10 ? date.month : '0' + date.month;\n      var day = date.date > 10 ? date.date : '0' + date.date;\n      this.updateTime.year = date.year;\n      this.updateTime.month = newmonth;\n      this.updateTime.date = day;\n    },\n    //获取点击重温事件\n    backPage: function backPage(e) {\n      if (e.back) {\n        this.total = e.sum;\n        this.changePage = false;\n        this.getPost = e.showpost;\n        this.canvasImg = '';\n      }\n    },\n    // 初始化画板\n    init: function init() {\n      var _this2 = this;\n\n      this.$nextTick(function () {\n        var canvas = _this2.$refs.canvas;\n        _this2.ctx = canvas.getContext(\"2d\");\n        _this2.ctx.strokeStyle = \"#000\";\n        _this2.ctx.lineWidth = 5;\n        _this2.ctx.font = \"20px Axure Handwriting, 'Courier New', monospace,华文新魏\";\n        _this2.stage_info = canvas.getBoundingClientRect();\n      });\n    },\n    // pc\n    mouseDown: function mouseDown(ev) {\n      var e = ev || event;\n      e.preventDefault();\n      this.isDown = true;\n      var obj = {\n        x: e.offsetX,\n        y: e.offsetY\n      };\n      this.startX = obj.x;\n      this.startY = obj.y;\n      this.ctx.beginPath();\n      this.ctx.moveTo(this.startX, this.startY);\n      this.ctx.lineTo(obj.x, obj.y);\n      this.ctx.stroke();\n      this.ctx.closePath();\n      this.points.push(obj);\n    },\n    mouseMove: function mouseMove(ev) {\n      var e = ev || event;\n      e.preventDefault();\n\n      if (this.isDown) {\n        var obj = {\n          x: e.offsetX,\n          y: e.offsetY\n        };\n        this.ctx.beginPath();\n        this.ctx.moveTo(this.startX, this.startY);\n        this.ctx.lineTo(obj.x, obj.y);\n        this.ctx.stroke();\n        this.ctx.closePath();\n        this.startY = obj.y;\n        this.startX = obj.x;\n        this.points.push(obj);\n      }\n    },\n    mouseUp: function mouseUp(ev) {\n      var e = ev || event;\n      e.preventDefault();\n      var obj = {\n        x: ev.offsetX,\n        y: ev.offsetY\n      };\n      this.ctx.beginPath();\n      this.ctx.moveTo(this.startX, this.startY);\n      this.ctx.lineTo(obj.x, obj.y);\n      this.ctx.stroke();\n      this.ctx.closePath();\n      this.points.push(obj);\n      this.points.push({\n        x: -1,\n        y: -1\n      });\n      this.isDown = false;\n    },\n    // mobile\n    touchStart: function touchStart(ev) {\n      var e = ev || event;\n      e.preventDefault();\n\n      if (e.touches.length == 1) {\n        // let obj = {\n        // \tx: e.targetTouches[0].clientX - 45,\n        // \ty: e.targetTouches[0].clientY - 224\n        // }\n        var obj = {\n          x: e.targetTouches[0].clientX - this.stage_info.left,\n          y: e.targetTouches[0].clientY - this.stage_info.top\n        };\n        this.startX = obj.x;\n        this.startY = obj.y;\n        this.ctx.beginPath();\n        this.ctx.moveTo(this.startX, this.startY);\n        this.ctx.lineTo(obj.x, obj.y);\n        this.ctx.stroke();\n        this.ctx.closePath();\n        this.points.push(obj);\n      }\n    },\n    touchMove: function touchMove(ev) {\n      var e = ev || event;\n      e.preventDefault();\n\n      if (e.touches.length == 1) {\n        // let obj = {\n        // \tx: e.targetTouches[0].clientX - 45,\n        // \ty: e.targetTouches[0].clientY - 224\n        // }\n        var obj = {\n          x: e.targetTouches[0].clientX - this.stage_info.left,\n          y: e.targetTouches[0].clientY - this.stage_info.top\n        };\n        this.ctx.beginPath();\n        this.ctx.moveTo(this.startX, this.startY);\n        this.ctx.lineTo(obj.x, obj.y);\n        this.ctx.stroke();\n        this.ctx.closePath();\n        this.startX = obj.x;\n        this.startY = obj.y;\n        this.points.push(obj);\n      }\n    },\n    touchEnd: function touchEnd(ev) {\n      var e = ev || event;\n      e.preventDefault();\n\n      if (e.touches.length == 1) {\n        // let obj = {\n        // \tx: e.targetTouches[0].clientX - 45,\n        // \ty: e.targetTouches[0].clientY - 224\n        // }\n        var obj = {\n          x: e.targetTouches[0].clientX - this.stage_info.left,\n          y: e.targetTouches[0].clientY - this.stage_info.top\n        };\n        this.startX = obj.x;\n        this.startY = obj.y;\n        this.ctx.beginPath();\n        this.ctx.moveTo(this.startX, this.startY);\n        this.ctx.lineTo(obj.x, obj.y);\n        this.ctx.stroke();\n        this.ctx.closePath();\n        this.points.push(obj);\n      }\n    },\n    //点击生成海报\n    confirmNmae: function confirmNmae() {\n      var _this3 = this;\n\n      this.show = false;\n      this.canvasImg = this.$refs.canvas.toDataURL(); //签名img\n\n      setTimeout(function () {\n        _this3.getPost = true;\n      }, 2000);\n      setTimeout(function () {\n        _this3.showMUsic();\n      }, 4000);\n    },\n    showMUsic: function showMUsic() {\n      var vo = document.getElementById(\"musicType\");\n\n      if (this.getPost) {\n        vo.play();\n      } else {\n        vo.pause();\n      }\n    }\n  }\n};",{"version":3,"sources":["App.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div id=\"app\">\r\n\t\t<!-- 背景音乐 -->\r\n\t\t<div class=\"flex-container column\">\r\n\t\t\t<video id=\"video\" src=\"./assets/audio/music.mp3\" controls=\"controls\" hidden=\"hidden\" :muted=\"false\"\r\n\t\t\t\tloop=\"loop\"> </video>\r\n\t\t</div>\r\n\t\t<img id=\"playImg\" class=\"play\" :src=\"sound\" @click=\"changeImg\" />\r\n\t\t<!-- 海报生成音效 -->\r\n\t\t<div>\r\n\t\t\t<video id=\"musicType\" src=\"./assets/audio/remind.mp3\" controls=\"controls\" hidden=\"hidden\" :muted=\"false\">\r\n\t\t\t</video>\r\n\t\t</div>\r\n\r\n\t\t<HelloWorld :updateTime=\"updateTime\" :total=\"total\" @province=\"province\" @change=\"change\" v-if=\"!changePage\">\r\n\t\t</HelloWorld>\r\n\t\t<postPage :updateTime=\"updateTime\" :total=\"total\" :provinceName=\"provinceName\" :getPost=\"getPost\"\r\n\t\t\t:canvasImg=\"canvasImg\" @backPage=\"backPage\" v-else-if=\"changePage\"></postPage>\r\n\r\n\t\t<div class=\"nameBox\" v-if=\"show\">\r\n\t\t\t<div id=\"bbb\" class=\"innerBox\">\r\n\t\t\t\t<div class=\"sign\">承诺人签名</div>\r\n\t\t\t\t<!-- <div id=\"signature\" class=\"signature\" style=\"clear:both\"> -->\r\n\t\t\t\t<!-- <div id=\"signature\" class=\"canvas\"> -->\r\n\t\t\t\t<canvas id=\"myCanvas\" style=\"clear:both\" class=\"myCan\" ref=\"canvas\" @touchstart=\"touchStart\"\r\n\t\t\t\t\t@touchmove=\"touchMove\" @touchend=\"touchEnd\" @mousedown=\"mouseDown\" @mousemove=\"mouseMove\"\r\n\t\t\t\t\t@mouseup=\"mouseUp\">\r\n\t\t\t\t</canvas>\r\n\t\t\t\t<!-- </div> -->\r\n\t\t\t\t<!-- </div> -->\r\n\t\t\t\t<div class=\"confirm\" @click=\"confirmNmae\">确定</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport Vue from 'vue';\r\n\timport HelloWorld from './components/HelloWorld.vue'\r\n\timport postPage from './components/postPage.vue'\r\n\r\n\texport default {\r\n\t\tname: 'app',\r\n\t\tcomponents: {\r\n\t\t\tHelloWorld,\r\n\t\t\tpostPage\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tupdateTime: {\r\n\t\t\t\t\tyear: '',\r\n\t\t\t\t\tmonth: '',\r\n\t\t\t\t\tdate: ''\r\n\t\t\t\t}, //年月日\r\n\t\t\t\tchangePage: false, //切换页面\r\n\t\t\t\tshow: false, //输入名字框\r\n\t\t\t\tprovinceName: '四川',\r\n\t\t\t\ttotal: 125879, //承诺次数\r\n\t\t\t\tgetPost: false, //触发生成海报\r\n\t\t\t\tsound: require('./assets/unplay.png'),\r\n\t\t\t\tisplay: false,\r\n\t\t\t\tMp: \"./assets/audio/music.mp3\",\r\n\r\n\t\t\t\tcanvasWidth: null,\r\n\t\t\t\tcanvasHeight: null,\r\n\t\t\t\tcanvasImg: '', // 签名图片地址\r\n\t\t\t\tctx: null, //画板\r\n\t\t\t\tstage_info: [], // 移动端按下点到屏幕的偏差\r\n\t\t\t\tisDown: false, //是否按下\r\n\t\t\t\tpoints: [], //按下点组合\r\n\t\t\t\tstartX: 0, // 起始点x坐标\r\n\t\t\t\tstartY: 0, // 起始点y坐标\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {},\r\n\t\tmounted() {\r\n\t\t\tthis.addDate()\r\n\t\t\t// this.init()\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tname(newV, oldV) {\r\n\t\t\t\tthis.name = newV\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t//播放背景音乐\r\n\t\t\tchangeImg() {\r\n\t\t\t\tlet vo = document.getElementById(\"video\")\r\n\t\t\t\tthis.isplay = !this.isplay\r\n\t\t\t\tif (this.isplay) {\r\n\t\t\t\t\tthis.sound = require('./assets/play.png')\r\n\t\t\t\t\tvo.play()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.sound = require('./assets/unplay.png')\r\n\t\t\t\t\tvo.pause()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//获取点击承诺事件\r\n\t\t\tchange(e) {\r\n\t\t\t\tthis.changePage = e\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.show = true\r\n\t\t\t\t\tthis.init()\r\n\t\t\t\t}, 5000)\r\n\t\t\t},\r\n\t\t\t//获取选中后地址\r\n\t\t\tprovince(e) {\r\n\t\t\t\tthis.provinceName = e\r\n\t\t\t\t// console.log(this.provinceName)\r\n\t\t\t},\r\n\t\t\t//获取当前年月日\r\n\t\t\taddDate() {\r\n\t\t\t\tconst nowDate = new Date();\r\n\t\t\t\tconst date = {\r\n\t\t\t\t\tyear: nowDate.getFullYear(),\r\n\t\t\t\t\tmonth: nowDate.getMonth() + 1,\r\n\t\t\t\t\tdate: nowDate.getDate(),\r\n\t\t\t\t}\r\n\t\t\t\tconst newmonth = date.month > 10 ? date.month : '0' + date.month\r\n\t\t\t\tconst day = date.date > 10 ? date.date : '0' + date.date\r\n\t\t\t\tthis.updateTime.year = date.year\r\n\t\t\t\tthis.updateTime.month = newmonth\r\n\t\t\t\tthis.updateTime.date = day\r\n\t\t\t},\r\n\t\t\t//获取点击重温事件\r\n\t\t\tbackPage(e) {\r\n\t\t\t\tif (e.back) {\r\n\t\t\t\t\tthis.total = e.sum\r\n\t\t\t\t\tthis.changePage = false\r\n\t\t\t\t\tthis.getPost = e.showpost\r\n\t\t\t\t\tthis.canvasImg = ''\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 初始化画板\r\n\t\t\tinit() {\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tlet canvas = this.$refs.canvas;\r\n\t\t\t\t\tthis.ctx = canvas.getContext(\"2d\");\r\n\t\t\t\t\tthis.ctx.strokeStyle = \"#000\";\r\n\t\t\t\t\tthis.ctx.lineWidth = 5;\r\n\t\t\t\t\tthis.ctx.font = \"20px Axure Handwriting, 'Courier New', monospace,华文新魏\";\r\n\t\t\t\t\tthis.stage_info = canvas.getBoundingClientRect();\r\n\t\t\t\t})\r\n\r\n\t\t\t},\r\n\t\t\t// pc\r\n\t\t\tmouseDown(ev) {\r\n\t\t\t\tlet e = ev || event;\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tthis.isDown = true;\r\n\t\t\t\tlet obj = {\r\n\t\t\t\t\tx: e.offsetX,\r\n\t\t\t\t\ty: e.offsetY\r\n\t\t\t\t}\r\n\t\t\t\tthis.startX = obj.x;\r\n\t\t\t\tthis.startY = obj.y;\r\n\t\t\t\tthis.ctx.beginPath();\r\n\t\t\t\tthis.ctx.moveTo(this.startX, this.startY);\r\n\t\t\t\tthis.ctx.lineTo(obj.x, obj.y);\r\n\t\t\t\tthis.ctx.stroke();\r\n\t\t\t\tthis.ctx.closePath();\r\n\t\t\t\tthis.points.push(obj);\r\n\t\t\t},\r\n\t\t\tmouseMove(ev) {\r\n\t\t\t\tlet e = ev || event;\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tif (this.isDown) {\r\n\t\t\t\t\tlet obj = {\r\n\t\t\t\t\t\tx: e.offsetX,\r\n\t\t\t\t\t\ty: e.offsetY\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.ctx.beginPath();\r\n\t\t\t\t\tthis.ctx.moveTo(this.startX, this.startY);\r\n\t\t\t\t\tthis.ctx.lineTo(obj.x, obj.y);\r\n\t\t\t\t\tthis.ctx.stroke();\r\n\t\t\t\t\tthis.ctx.closePath();\r\n\t\t\t\t\tthis.startY = obj.y\r\n\t\t\t\t\tthis.startX = obj.x\r\n\t\t\t\t\tthis.points.push(obj)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmouseUp(ev) {\r\n\t\t\t\tlet e = ev || event;\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tlet obj = {\r\n\t\t\t\t\tx: ev.offsetX,\r\n\t\t\t\t\ty: ev.offsetY\r\n\t\t\t\t}\r\n\t\t\t\tthis.ctx.beginPath();\r\n\t\t\t\tthis.ctx.moveTo(this.startX, this.startY);\r\n\t\t\t\tthis.ctx.lineTo(obj.x, obj.y);\r\n\t\t\t\tthis.ctx.stroke();\r\n\t\t\t\tthis.ctx.closePath();\r\n\t\t\t\tthis.points.push(obj);\r\n\t\t\t\tthis.points.push({\r\n\t\t\t\t\tx: -1,\r\n\t\t\t\t\ty: -1\r\n\t\t\t\t});\r\n\t\t\t\tthis.isDown = false;\r\n\t\t\t},\r\n\t\t\t// mobile\r\n\t\t\ttouchStart(ev) {\r\n\t\t\t\tlet e = ev || event;\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tif (e.touches.length == 1) {\r\n\t\t\t\t\t// let obj = {\r\n\t\t\t\t\t// \tx: e.targetTouches[0].clientX - 45,\r\n\t\t\t\t\t// \ty: e.targetTouches[0].clientY - 224\r\n\t\t\t\t\t// }\r\n\t\t\t\t\tlet obj = {\r\n\t\t\t\t\t\tx: e.targetTouches[0].clientX - this.stage_info.left,\r\n\t\t\t\t\t\ty: e.targetTouches[0].clientY - this.stage_info.top\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.startX = obj.x;\r\n\t\t\t\t\tthis.startY = obj.y;\r\n\t\t\t\t\tthis.ctx.beginPath();\r\n\t\t\t\t\tthis.ctx.moveTo(this.startX, this.startY);\r\n\t\t\t\t\tthis.ctx.lineTo(obj.x, obj.y);\r\n\t\t\t\t\tthis.ctx.stroke();\r\n\t\t\t\t\tthis.ctx.closePath();\r\n\t\t\t\t\tthis.points.push(obj);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ttouchMove(ev) {\r\n\t\t\t\tlet e = ev || event;\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tif (e.touches.length == 1) {\r\n\t\t\t\t\t// let obj = {\r\n\t\t\t\t\t// \tx: e.targetTouches[0].clientX - 45,\r\n\t\t\t\t\t// \ty: e.targetTouches[0].clientY - 224\r\n\t\t\t\t\t// }\r\n\t\t\t\t\tlet obj = {\r\n\t\t\t\t\t\tx: e.targetTouches[0].clientX - this.stage_info.left,\r\n\t\t\t\t\t\ty: e.targetTouches[0].clientY - this.stage_info.top\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.ctx.beginPath();\r\n\t\t\t\t\tthis.ctx.moveTo(this.startX, this.startY);\r\n\t\t\t\t\tthis.ctx.lineTo(obj.x, obj.y);\r\n\t\t\t\t\tthis.ctx.stroke();\r\n\t\t\t\t\tthis.ctx.closePath();\r\n\t\t\t\t\tthis.startX = obj.x;\r\n\t\t\t\t\tthis.startY = obj.y;\r\n\t\t\t\t\tthis.points.push(obj)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ttouchEnd(ev) {\r\n\t\t\t\tlet e = ev || event;\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tif (e.touches.length == 1) {\r\n\t\t\t\t\t// let obj = {\r\n\t\t\t\t\t// \tx: e.targetTouches[0].clientX - 45,\r\n\t\t\t\t\t// \ty: e.targetTouches[0].clientY - 224\r\n\t\t\t\t\t// }\r\n\t\t\t\t\tlet obj = {\r\n\t\t\t\t\t\tx: e.targetTouches[0].clientX - this.stage_info.left,\r\n\t\t\t\t\t\ty: e.targetTouches[0].clientY - this.stage_info.top\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.startX = obj.x;\r\n\t\t\t\t\tthis.startY = obj.y;\r\n\t\t\t\t\tthis.ctx.beginPath();\r\n\t\t\t\t\tthis.ctx.moveTo(this.startX, this.startY);\r\n\t\t\t\t\tthis.ctx.lineTo(obj.x, obj.y);\r\n\t\t\t\t\tthis.ctx.stroke();\r\n\t\t\t\t\tthis.ctx.closePath();\r\n\t\t\t\t\tthis.points.push(obj)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//点击生成海报\r\n\t\t\tconfirmNmae() {\r\n\t\t\t\tthis.show = false\r\n\t\t\t\tthis.canvasImg = this.$refs.canvas.toDataURL(); //签名img\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.getPost = true\r\n\t\t\t\t}, 2000)\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.showMUsic()\r\n\t\t\t\t}, 4000)\r\n\t\t\t},\r\n\t\t\tshowMUsic() {\r\n\t\t\t\tlet vo = document.getElementById(\"musicType\")\r\n\t\t\t\tif (this.getPost) {\r\n\t\t\t\t\tvo.play()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvo.pause()\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t#app {\r\n\t\twidth: 100vw;\r\n\t\theight: 100vh;\r\n\t\tmargin-top: -2vw;\r\n\t\t/* overflow: hidden; */\r\n\t\tbackground-image: url(assets/bg.png);\r\n\t\tcolor: #fff;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.flex-container {\r\n\t\tposition: fixed;\r\n\t\ttop: 0vw;\r\n\t\tleft: 0vw;\r\n\t\twidth: 100vw;\r\n\t\theight: 10vh;\r\n\t}\r\n\r\n\t.play {\r\n\t\tposition: fixed;\r\n\t\ttop: 4vw;\r\n\t\tright: 5vw;\r\n\t\twidth: 7vw;\r\n\t\theight: 7vw;\r\n\t\tbackground-color: #fff;\r\n\t}\r\n\r\n\t.nameBox {\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\twidth: 100vw;\r\n\t\theight: 100vh;\r\n\t\tbackground-color: rgba(50, 6, 8, 0.5);\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.innerBox {\r\n\t\twidth: 85%;\r\n\t\theight: 45%;\r\n\t\tmargin: -10vw auto 0;\r\n\t\tborder-radius: 3vw;\r\n\t\tbackground-color: rgb(191, 22, 41);\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: space-evenly;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.sign {\r\n\t\tcolor: rgb(252, 225, 58);\r\n\t\tfont-size: 5vw;\r\n\t\tfont-weight: bold;\r\n\t\tletter-spacing: 1vw;\r\n\t}\r\n\r\n\t.signature {\r\n\t\twidth: 85%;\r\n\t\theight: 50%;\r\n\t\tbackground: #fff;\r\n\t\t/* position: relative; */\r\n\t}\r\n\r\n\r\n\t.canvas {\r\n\t\t/* position: relative; */\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tfont-size: 0;\r\n\t\tcolor: #000000;\r\n\t}\r\n\r\n\t.myCan {\r\n\t\twidth: 85%;\r\n\t\theight: 50%;\r\n\t\t/* width: 100%;\r\n\t\theight: 100%; */\r\n\t\tbackground-color: #fff;\r\n\t}\r\n\r\n\t.innerBox input {\r\n\t\theight: 30%;\r\n\t\tcolor: #000000;\r\n\t}\r\n\r\n\t.confirm {\r\n\t\twidth: 30vw;\r\n\t\theight: 8vw;\r\n\t\tline-height: 8vw;\r\n\t\tcolor: rgb(203, 48, 32);\r\n\t\ttext-align: center;\r\n\t\tbackground-color: rgb(255, 153, 0);\r\n\t\tborder-radius: 5vw;\r\n\t\tfont-size: 5vw;\r\n\t}\r\n</style>\r\n"],"sourceRoot":"src"}]}